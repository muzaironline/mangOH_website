<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>mqttClient Service Connect error? - mangOH forum</title>
    <meta name="description" content="Hi! I‚Äôm developing a SW to connect with mosquitto broker. I started from the source code in apps/platformservices of Legato environment. 
I can right build the project, create the session, but I have problem when I have &amp;hellip;">
    <meta name="generator" content="Discourse 3.2.0.beta2-dev - https://github.com/discourse/discourse version 11176407155714e2ebc3885a5f3301a2b4d37c5b">
<link rel="icon" type="image/png" href="https://global.discourse-cdn.com/business6/uploads/mangoh/optimized/1X/c8f691ef20d8b5ee5eb3e88daa9a37267fd8b5c6_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="https://global.discourse-cdn.com/business6/uploads/mangoh/optimized/1X/c9436805837dffdd4ff80102c98ca366d74fee66_2_180x180.png">
<meta name="theme-color" media="all" content="#ffffff">

<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="https://forum.mangoh.io/t/mqttclient-service-connect-error/9093?page=4" />

<link rel="search" type="application/opensearchdescription+xml" href="https://forum.mangoh.io/opensearch.xml" title="mangOH forum Search">

    <link href="https://sea2.discourse-cdn.com/business6/stylesheets/color_definitions_mangoh-color-scheme_1_1_22c40ac3b958048f5d2773ba7c6e0a583de42cca.css?__ws=forum.mangoh.io" media="all" rel="stylesheet" class="light-scheme"/>

  <link href="https://sea2.discourse-cdn.com/business6/stylesheets/desktop_fbfeae940828649b0abf03cf5cf6eebbf6949dd1.css?__ws=forum.mangoh.io" media="all" rel="stylesheet" data-target="desktop"  />



  <link href="https://sea2.discourse-cdn.com/business6/stylesheets/checklist_fbfeae940828649b0abf03cf5cf6eebbf6949dd1.css?__ws=forum.mangoh.io" media="all" rel="stylesheet" data-target="checklist"  />
  <link href="https://sea2.discourse-cdn.com/business6/stylesheets/discourse-adplugin_fbfeae940828649b0abf03cf5cf6eebbf6949dd1.css?__ws=forum.mangoh.io" media="all" rel="stylesheet" data-target="discourse-adplugin"  />
  <link href="https://sea2.discourse-cdn.com/business6/stylesheets/discourse-akismet_fbfeae940828649b0abf03cf5cf6eebbf6949dd1.css?__ws=forum.mangoh.io" media="all" rel="stylesheet" data-target="discourse-akismet"  />
  <link href="https://sea2.discourse-cdn.com/business6/stylesheets/discourse-cakeday_fbfeae940828649b0abf03cf5cf6eebbf6949dd1.css?__ws=forum.mangoh.io" media="all" rel="stylesheet" data-target="discourse-cakeday"  />
  <link href="https://sea2.discourse-cdn.com/business6/stylesheets/discourse-data-explorer_fbfeae940828649b0abf03cf5cf6eebbf6949dd1.css?__ws=forum.mangoh.io" media="all" rel="stylesheet" data-target="discourse-data-explorer"  />
  <link href="https://sea2.discourse-cdn.com/business6/stylesheets/discourse-details_fbfeae940828649b0abf03cf5cf6eebbf6949dd1.css?__ws=forum.mangoh.io" media="all" rel="stylesheet" data-target="discourse-details"  />
  <link href="https://sea2.discourse-cdn.com/business6/stylesheets/discourse-footnote_fbfeae940828649b0abf03cf5cf6eebbf6949dd1.css?__ws=forum.mangoh.io" media="all" rel="stylesheet" data-target="discourse-footnote"  />
  <link href="https://sea2.discourse-cdn.com/business6/stylesheets/discourse-lazy-videos_fbfeae940828649b0abf03cf5cf6eebbf6949dd1.css?__ws=forum.mangoh.io" media="all" rel="stylesheet" data-target="discourse-lazy-videos"  />
  <link href="https://sea2.discourse-cdn.com/business6/stylesheets/discourse-local-dates_fbfeae940828649b0abf03cf5cf6eebbf6949dd1.css?__ws=forum.mangoh.io" media="all" rel="stylesheet" data-target="discourse-local-dates"  />
  <link href="https://sea2.discourse-cdn.com/business6/stylesheets/discourse-narrative-bot_fbfeae940828649b0abf03cf5cf6eebbf6949dd1.css?__ws=forum.mangoh.io" media="all" rel="stylesheet" data-target="discourse-narrative-bot"  />
  <link href="https://sea2.discourse-cdn.com/business6/stylesheets/discourse-policy_fbfeae940828649b0abf03cf5cf6eebbf6949dd1.css?__ws=forum.mangoh.io" media="all" rel="stylesheet" data-target="discourse-policy"  />
  <link href="https://sea2.discourse-cdn.com/business6/stylesheets/discourse-post-voting_fbfeae940828649b0abf03cf5cf6eebbf6949dd1.css?__ws=forum.mangoh.io" media="all" rel="stylesheet" data-target="discourse-post-voting"  />
  <link href="https://sea2.discourse-cdn.com/business6/stylesheets/discourse-presence_fbfeae940828649b0abf03cf5cf6eebbf6949dd1.css?__ws=forum.mangoh.io" media="all" rel="stylesheet" data-target="discourse-presence"  />
  <link href="https://sea2.discourse-cdn.com/business6/stylesheets/discourse-solved_fbfeae940828649b0abf03cf5cf6eebbf6949dd1.css?__ws=forum.mangoh.io" media="all" rel="stylesheet" data-target="discourse-solved"  />
  <link href="https://sea2.discourse-cdn.com/business6/stylesheets/discourse-spoiler-alert_fbfeae940828649b0abf03cf5cf6eebbf6949dd1.css?__ws=forum.mangoh.io" media="all" rel="stylesheet" data-target="discourse-spoiler-alert"  />
  <link href="https://sea2.discourse-cdn.com/business6/stylesheets/discourse-templates_fbfeae940828649b0abf03cf5cf6eebbf6949dd1.css?__ws=forum.mangoh.io" media="all" rel="stylesheet" data-target="discourse-templates"  />
  <link href="https://sea2.discourse-cdn.com/business6/stylesheets/discourse-topic-voting_fbfeae940828649b0abf03cf5cf6eebbf6949dd1.css?__ws=forum.mangoh.io" media="all" rel="stylesheet" data-target="discourse-topic-voting"  />
  <link href="https://sea2.discourse-cdn.com/business6/stylesheets/hosted-site_fbfeae940828649b0abf03cf5cf6eebbf6949dd1.css?__ws=forum.mangoh.io" media="all" rel="stylesheet" data-target="hosted-site"  />
  <link href="https://sea2.discourse-cdn.com/business6/stylesheets/poll_fbfeae940828649b0abf03cf5cf6eebbf6949dd1.css?__ws=forum.mangoh.io" media="all" rel="stylesheet" data-target="poll"  />
  <link href="https://sea2.discourse-cdn.com/business6/stylesheets/discourse-post-voting_desktop_fbfeae940828649b0abf03cf5cf6eebbf6949dd1.css?__ws=forum.mangoh.io" media="all" rel="stylesheet" data-target="discourse-post-voting_desktop"  />
  <link href="https://sea2.discourse-cdn.com/business6/stylesheets/discourse-topic-voting_desktop_fbfeae940828649b0abf03cf5cf6eebbf6949dd1.css?__ws=forum.mangoh.io" media="all" rel="stylesheet" data-target="discourse-topic-voting_desktop"  />
  <link href="https://sea2.discourse-cdn.com/business6/stylesheets/poll_desktop_fbfeae940828649b0abf03cf5cf6eebbf6949dd1.css?__ws=forum.mangoh.io" media="all" rel="stylesheet" data-target="poll_desktop"  />

  <link href="https://sea2.discourse-cdn.com/business6/stylesheets/desktop_theme_1_ab9b3e277688d87911f25cd6e1b20eb3d4321381.css?__ws=forum.mangoh.io" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="1" data-theme-name="mangoh"/>

    
    <meta id="data-ga-universal-analytics" data-tracking-code="UA-718568-6" data-json="{&quot;cookieDomain&quot;:&quot;mangoh.io&quot;}" data-auto-link-domains="">

  <link rel="preload" href="https://global.discourse-cdn.com/business6/assets/google-universal-analytics-v3-08add7ec997ab472fcd9f821d32ff7caf4b8b9a5de2ec18ca723a040be07a098.br.js" as="script">
<script defer src="https://global.discourse-cdn.com/business6/assets/google-universal-analytics-v3-08add7ec997ab472fcd9f821d32ff7caf4b8b9a5de2ec18ca723a040be07a098.br.js"></script>


        <link rel="alternate nofollow" type="application/rss+xml" title="RSS feed of &#39;mqttClient Service Connect error?&#39;" href="https://forum.mangoh.io/t/mqttclient-service-connect-error/9093.rss" />
    <meta property="og:site_name" content="mangOH forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://global.discourse-cdn.com/business6/uploads/mangoh/original/2X/2/2399ecdcd116a8bb32206b899de6ab1006b75391.png" />
<meta property="og:image" content="https://global.discourse-cdn.com/business6/uploads/mangoh/original/2X/2/2399ecdcd116a8bb32206b899de6ab1006b75391.png" />
<meta property="og:url" content="https://forum.mangoh.io/t/mqttclient-service-connect-error/9093?page=4" />
<meta name="twitter:url" content="https://forum.mangoh.io/t/mqttclient-service-connect-error/9093?page=4" />
<meta property="og:title" content="mqttClient Service Connect error?" />
<meta name="twitter:title" content="mqttClient Service Connect error?" />
<meta property="og:description" content="No idea then‚Ä¶  You might try other mqtt server  https://cumulocity.com/guides/device-sdk/mqtt-examples/" />
<meta name="twitter:description" content="No idea then‚Ä¶  You might try other mqtt server  https://cumulocity.com/guides/device-sdk/mqtt-examples/" />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="6 mins üïë" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="1 ‚ù§" />
<meta property="article:published_time" content="2021-05-03T12:26:54+00:00" />
<meta property="og:ignore_canonical" content="true" />

        <link rel="prev" href="/t/mqttclient-service-connect-error/9093?page=3">
        <link rel="next" href="/t/mqttclient-service-connect-error/9093?page=5">

    
  </head>
  <body class="crawler ">
    <!--
<div id="navmenucontainer" class="container">
<div id="navmenuv">
    <ul class="nav">
      <li><a href="http://mangoh.io/">Project mangOH</a></li>
      <li><a href="http://mangoh.io/mango-green.html">mangOH Green</a></li>
      <li><a href="http://mangoh.io/buy-mangoh.html">Buy</a></li>
      <li><a href="http://mangoh.io/build-your-own.html">Build your own</a></li>
    </ul>
</div>
</div>
-->
    <header>
  <a href="/">
    mangOH forum
  </a>
</header>

    <div id="main-outlet" class="wrap" role="main">
        <div id="topic-title">
    <h1>
      <a href="/t/mqttclient-service-connect-error/9093">mqttClient Service Connect error?</a>
    </h1>


  </div>

  

    <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <meta itemprop='headline' content='mqttClient Service Connect error?'>
        <meta itemprop='articleSection' content='Uncategorized'>
      <meta itemprop='keywords' content=''>
      <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
        <meta itemprop='name' content='mangOH forum'>
          <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
            <meta itemprop='url' content='https://global.discourse-cdn.com/business6/uploads/mangoh/original/1X/284b9ca2de433d1cdfe5448455df1b398c8cc9c8.png'>
          </div>
      </div>

          <div id='post_68' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://forum.mangoh.io/u/jyijyi'><span itemprop='name'>jyijyi</span></a>
                
              </span>

              <link itemprop="mainEntityOfPage" href="https://forum.mangoh.io/t/mqttclient-service-connect-error/9093">


              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2021-05-03T12:26:54Z' class='post-time'>
                    May 3, 2021, 12:26pm
                  </time>
                  <meta itemprop='dateModified' content='2021-05-03T12:26:54Z'>
              <span itemprop='position'>68</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>No idea then‚Ä¶</p>
<p>You might try other mqtt server</p>
<p><a href="https://cumulocity.com/guides/device-sdk/mqtt-examples/" class="onebox" target="_blank" rel="noopener nofollow ugc">https://cumulocity.com/guides/device-sdk/mqtt-examples/</a></p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="0" />
              </div>

          </div>
          <div id='post_69' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://forum.mangoh.io/u/gavinoimparato1'><span itemprop='name'>gavinoimparato1</span></a>
                
              </span>

              <link itemprop="mainEntityOfPage" href="https://forum.mangoh.io/t/mqttclient-service-connect-error/9093">

                <link itemprop="image" href="https://global.discourse-cdn.com/business6/uploads/mangoh/original/2X/2/22a8f1ca08741400f4b3daa4a9231ccc707968d4.png">

              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2021-05-03T12:49:29Z' class='post-time'>
                    May 3, 2021, 12:49pm
                  </time>
                  <meta itemprop='dateModified' content='2021-05-03T12:49:29Z'>
              <span itemprop='position'>69</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>On the other hand the socket error is just a warning (seeing the code). Instead, the error is the following:</p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="https://global.discourse-cdn.com/business6/uploads/mangoh/original/2X/2/22a8f1ca08741400f4b3daa4a9231ccc707968d4.png" data-download-href="/uploads/short-url/4WCc90WzTUfstgXqOH3ipo2lKyE.png?dl=1" title="image" rel="noopener nofollow ugc"><img src="https://global.discourse-cdn.com/business6/uploads/mangoh/original/2X/2/22a8f1ca08741400f4b3daa4a9231ccc707968d4.png" alt="image" data-base62-sha1="4WCc90WzTUfstgXqOH3ipo2lKyE" width="690" height="121" data-small-upload="https://global.discourse-cdn.com/business6/uploads/mangoh/optimized/2X/2/22a8f1ca08741400f4b3daa4a9231ccc707968d4_2_10x10.png"><div class="meta">
<svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use xlink:href="#far-image"></use></svg><span class="filename">image</span><span class="informations">715√ó126 14.1 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use xlink:href="#discourse-expand"></use></svg>
</div></a></div></p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="1" />
              </div>

          </div>
          <div id='post_70' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://forum.mangoh.io/u/jyijyi'><span itemprop='name'>jyijyi</span></a>
                
              </span>

              <link itemprop="mainEntityOfPage" href="https://forum.mangoh.io/t/mqttclient-service-connect-error/9093">


              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2021-05-03T13:03:09Z' class='post-time'>
                    May 3, 2021,  1:03pm
                  </time>
                  <meta itemprop='dateModified' content='2021-05-03T13:03:09Z'>
              <span itemprop='position'>70</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>Didn‚Äôt  LE_FAULT is -6</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="1" />
              </div>

          </div>
          <div id='post_71' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://forum.mangoh.io/u/gavinoimparato1'><span itemprop='name'>gavinoimparato1</span></a>
                
              </span>

              <link itemprop="mainEntityOfPage" href="https://forum.mangoh.io/t/mqttclient-service-connect-error/9093">


              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2021-05-03T13:16:36Z' class='post-time'>
                    May 3, 2021,  1:16pm
                  </time>
                  <meta itemprop='dateModified' content='2021-05-03T13:29:39Z'>
              <span itemprop='position'>71</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>I‚Äôm trying to analyze this error‚Ä¶thanks for the advice</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="1" />
              </div>

          </div>
          <div id='post_72' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://forum.mangoh.io/u/jyijyi'><span itemprop='name'>jyijyi</span></a>
                
              </span>

              <link itemprop="mainEntityOfPage" href="https://forum.mangoh.io/t/mqttclient-service-connect-error/9093">


              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2021-05-03T13:18:50Z' class='post-time'>
                    May 3, 2021,  1:18pm
                  </time>
                  <meta itemprop='dateModified' content='2021-05-03T13:18:50Z'>
              <span itemprop='position'>72</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>Then that means it is  not MQTTCLIENT_NULL_PARAMETER</p>
<pre><code> switch (connectResult)
    {
        case SOCKET_ERROR:
            LE_WARN("Socket error");
            result = LE_FAULT;
            break;

        case MQTTCLIENT_NULL_PARAMETER:
        case MQTTCLIENT_BAD_STRUCTURE:
        case MQTTCLIENT_BAD_UTF8_STRING:
            result = LE_BAD_PARAMETER;
            break;</code></pre>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="1" />
              </div>

          </div>
          <div id='post_73' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://forum.mangoh.io/u/gavinoimparato1'><span itemprop='name'>gavinoimparato1</span></a>
                
              </span>

              <link itemprop="mainEntityOfPage" href="https://forum.mangoh.io/t/mqttclient-service-connect-error/9093">

                <link itemprop="image" href="https://global.discourse-cdn.com/business6/uploads/mangoh/original/1X/252837692301bb53b7d4b8041901ad6486ced526.png">

              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2021-05-03T13:28:59Z' class='post-time'>
                    May 3, 2021,  1:28pm
                  </time>
                  <meta itemprop='dateModified' content='2021-05-03T13:28:59Z'>
              <span itemprop='position'>73</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>I‚Äôm so sorry for bothering you. In this post:</p>
<p><img src="https://global.discourse-cdn.com/business6/uploads/mangoh/original/1X/252837692301bb53b7d4b8041901ad6486ced526.png" alt="" width="32" height="32"> <a href="https://forum.legato.io/t/how-to-use-component-3rdparty-paho-mqtt-c/5612/21" rel="noopener nofollow ugc">Legato Forum ‚Äì 19 Feb 21</a></p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="https://global.discourse-cdn.com/business6/uploads/mangoh/original/1X/0769edef158f9b8e088d3b63e9fc4ef0d66bf277.jpeg" data-download-href="/uploads/short-url/13AiiapN7024pcmC31hKDCsnS2r.jpeg?dl=1" title="" rel="noopener nofollow ugc"><img src="https://global.discourse-cdn.com/business6/uploads/mangoh/original/1X/0769edef158f9b8e088d3b63e9fc4ef0d66bf277.jpeg" alt="" width="666" height="500" data-small-upload="https://global.discourse-cdn.com/business6/uploads/mangoh/optimized/1X/0769edef158f9b8e088d3b63e9fc4ef0d66bf277_2_10x10.png"><div class="meta">
<svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use xlink:href="#far-image"></use></svg><span class="filename"></span><span class="informations">684√ó513 39.6 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use xlink:href="#discourse-expand"></use></svg>
</div></a></div></p>
<h3>
<a name="how-to-use-component-3rdparty-pahomqttchttpsforumlegatoiothow-to-use-component-3rdparty-paho-mqtt-c561221-1" class="anchor" href="#how-to-use-component-3rdparty-pahomqttchttpsforumlegatoiothow-to-use-component-3rdparty-paho-mqtt-c561221-1"></a><a href="https://forum.legato.io/t/how-to-use-component-3rdparty-paho-mqtt-c/5612/21" rel="noopener nofollow ugc">How to use component 3rdParty paho.mqtt.c</a>
</h3>
<p>using the real ip I got the error return -6 Feb 19 14:56:41 fx30s user.info Legato: INFO | testPublisher[4655]/testPublisher T=main | testPublisher.c _testPublisher_COMPONENT_INIT() 111 | mqttBrokerURI tcp://104.198.201.218:1883 Feb 19 14:56:41‚Ä¶</p>
<p>the guy has my same problem:</p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="https://global.discourse-cdn.com/business6/uploads/mangoh/original/2X/2/2525bb41367b3cf52fce69e671b1eebfd862a43d.png" data-download-href="/uploads/short-url/5iCvlThwpRfMGMC5R7eTFEVKNHL.png?dl=1" title="image" rel="noopener nofollow ugc"><img src="https://global.discourse-cdn.com/business6/uploads/mangoh/original/2X/2/2525bb41367b3cf52fce69e671b1eebfd862a43d.png" alt="image" data-base62-sha1="5iCvlThwpRfMGMC5R7eTFEVKNHL" width="649" height="500" data-small-upload="https://global.discourse-cdn.com/business6/uploads/mangoh/optimized/2X/2/2525bb41367b3cf52fce69e671b1eebfd862a43d_2_10x10.png"><div class="meta">
<svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use xlink:href="#far-image"></use></svg><span class="filename">image</span><span class="informations">976√ó751 32.7 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use xlink:href="#discourse-expand"></use></svg>
</div></a></div></p>
<p>and the solution seems to be:</p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="https://global.discourse-cdn.com/business6/uploads/mangoh/original/2X/7/7cc2516c2f3881119ee35ea26f9357b88aca0e0e.png" data-download-href="/uploads/short-url/hNFwUB4QnPH7XP186H9OnfvS4oe.png?dl=1" title="image" rel="noopener nofollow ugc"><img src="https://global.discourse-cdn.com/business6/uploads/mangoh/original/2X/7/7cc2516c2f3881119ee35ea26f9357b88aca0e0e.png" alt="image" data-base62-sha1="hNFwUB4QnPH7XP186H9OnfvS4oe" width="690" height="276" data-small-upload="https://global.discourse-cdn.com/business6/uploads/mangoh/optimized/2X/7/7cc2516c2f3881119ee35ea26f9357b88aca0e0e_2_10x10.png"><div class="meta">
<svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use xlink:href="#far-image"></use></svg><span class="filename">image</span><span class="informations">693√ó278 7.24 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use xlink:href="#discourse-expand"></use></svg>
</div></a></div></p>
<p>I‚Äôm wondering if I could be in the same case<br>
[/quote]</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="1" />
              </div>

          </div>
          <div id='post_74' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://forum.mangoh.io/u/jyijyi'><span itemprop='name'>jyijyi</span></a>
                
              </span>

              <link itemprop="mainEntityOfPage" href="https://forum.mangoh.io/t/mqttclient-service-connect-error/9093">


              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2021-05-04T03:06:03Z' class='post-time'>
                    May 4, 2021,  3:06am
                  </time>
                  <meta itemprop='dateModified' content='2021-05-04T03:06:03Z'>
              <span itemprop='position'>74</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>you might give a try on that.</p>
<p>You might also try other mqtt server</p>
<p><a href="https://cumulocity.com/guides/device-sdk/mqtt-examples/" class="onebox" target="_blank" rel="noopener nofollow ugc">https://cumulocity.com/guides/device-sdk/mqtt-examples/</a></p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="0" />
              </div>

          </div>
          <div id='post_75' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://forum.mangoh.io/u/gavinoimparato1'><span itemprop='name'>gavinoimparato1</span></a>
                
              </span>

              <link itemprop="mainEntityOfPage" href="https://forum.mangoh.io/t/mqttclient-service-connect-error/9093">

                <link itemprop="image" href="https://global.discourse-cdn.com/business6/uploads/mangoh/original/2X/f/f846a6d46d7aebf865969c108c87cfc6d22304cc.png">

              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2021-05-04T11:01:43Z' class='post-time'>
                    May 4, 2021, 11:01am
                  </time>
                  <meta itemprop='dateModified' content='2021-05-04T11:03:25Z'>
              <span itemprop='position'>75</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>Hi <a class="mention" href="/u/jyijyi">@jyijyi</a>  as always I‚Äôm so sorry for bothering you. Unfortunately the supervisors necessarily want me to use mosquitto. I am desperate. In your opinion, could a COMPONENT_INIT calling functions like this be correct? I do not know what to do. I can‚Äôt find any errors, debugging the MQTT_Connect function.</p>
<p>COMPONENT_INIT<br>
{<br>
<span class="hashtag">#if</span> MQTT_SERVER_USE_SECURED_CONNECTION<br>
const char mqttBrokerURI<span class="chcklst-box fa fa-square-o fa-fw"></span> = ‚Äússl://192.168.2.3:8883‚Äù;<br>
//const char mqttBrokerURI<span class="chcklst-box fa fa-square-o fa-fw"></span> = ‚Äússl://eu.airvantage.net:8883‚Äù;<br>
const uint8_t mqttPassword<span class="chcklst-box fa fa-square-o fa-fw"></span> = {‚ÄòS‚Äô, ‚ÄòW‚Äô, ‚ÄòI‚Äô};<br>
<span class="hashtag">#else</span><br>
const char mqttBrokerURI<span class="chcklst-box fa fa-square-o fa-fw"></span> = ‚Äútcp://192.168.2.3:1883‚Äù;<br>
//const char mqttBrokerURI<span class="chcklst-box fa fa-square-o fa-fw"></span> = ‚Äútcp://eu.airvantage.net:1883‚Äù;<br>
//const char mqttBrokerURI<span class="chcklst-box fa fa-square-o fa-fw"></span> = ‚Äútcp://127.0.0.1:1883‚Äù;<br>
<span class="hashtag">#endif</span><br>
//const char mqttBrokerURI<span class="chcklst-box fa fa-square-o fa-fw"></span> = ‚Äútcp://192.168.2.3:1883‚Äù;<br>
//const char mqttBrokerURI<span class="chcklst-box fa fa-square-o fa-fw"></span> = ‚Äútcp://eu.airvantage.net:1883‚Äù;<br>
//const uint8_t mqttPassword<span class="chcklst-box fa fa-square-o fa-fw"></span> = {‚ÄòS‚Äô, ‚ÄòW‚Äô, ‚ÄòI‚Äô};<br>
//char clientId[32] = ‚Äúkineton‚Äù;<br>
LE_ASSERT_OK(le_info_GetImei(DeviceIMEI, NUM_ARRAY_MEMBERS(DeviceIMEI)));<br>
char clientId[32];<br>
snprintf(clientId, sizeof(clientId), ‚Äú%s-pub‚Äù, DeviceIMEI);<br>
//Create memory pools*/<br>
MQTTSessionPoolRef = le_mem_CreatePool(‚ÄúMQTT session pool‚Äù, sizeof(mqtt_Session));<br>
le_mem_ExpandPool(MQTTSessionPoolRef, MQTT_SESSION_MAX);<br>
le_mem_SetDestructor(MQTTSessionPoolRef, mqttSessionDestructor);</p>
<pre><code>UsernamePoolRef = le_mem_CreatePool("MQTT username pool", MQTT_MAX_USERNAME_LENGTH);
PasswordPoolRef = le_mem_CreatePool("MQTT password pool", MQTT_MAX_PASSWORD_LENGTH);
MessagePoolRef = le_mem_CreatePool("MQTT message pool", sizeof(mqtt_Message));
TopicPoolRef = le_mem_CreatePool("MQTT topic pool", MQTT_MAX_TOPIC_LENGTH);
PayloadPoolRef = le_mem_CreatePool("MQTT payload pool", MQTT_MAX_PAYLOAD_LENGTH);

// MessageHandlerRefMap is created with size (MQTT_SESSION_MAX * 2) since each MQTT session
// may have 2 handlers, i.e. 1 message arrived handler and 1 connection lost handler
SessionRefMap = le_ref_CreateMap("MQTT sessions", MQTT_SESSION_MAX);
MessageHandlerRefMap = le_ref_CreateMap("MQTT message handlers", MQTT_SESSION_MAX * 2);

ReceiveThreadEventId = le_event_CreateId(
    "MqttClient receive notification", sizeof(mqtt_Message*));
le_event_AddHandler(
    "MqttClient receive notification", ReceiveThreadEventId, MessageReceivedEventHandler);

ConnectionLostThreadEventId = le_event_CreateId(
    "MqttClient connection lost notification", sizeof(mqtt_Message*));
le_event_AddHandler(
    "MqttClient connection lost notification",
    ConnectionLostThreadEventId,
    ConnectionLostEventHandler);

res = mqtt_CreateSession(mqttBrokerURI, clientId, &amp;MQTTSession);
  if (res != LE_OK){
      LE_INFO ("tutto male :( ");
  }
  else {
      LE_INFO("tutto ok");
  }

//inizia il mio codice
</code></pre>
<p>const uint16_t keepAliveInSeconds = 30;<br>
const bool cleanSession = true;<br>
const char* username = DeviceIMEI;<br>
//const char* username = ‚Äúkienton‚Äù;<br>
const uint16_t connectTimeout = 20;<br>
const uint16_t retryInterval = 10;<br>
mqtt_SetConnectOptions(<br>
MQTTSession,<br>
keepAliveInSeconds,<br>
cleanSession,<br>
username,<br>
<span class="hashtag">#if</span> MQTT_SERVER_USE_SECURED_CONNECTION<br>
mqttPassword,<br>
NUM_ARRAY_MEMBERS(mqttPassword),<br>
<span class="hashtag">#else</span><br>
NULL,<br>
0,<br>
<span class="hashtag">#endif</span><br>
connectTimeout,<br>
retryInterval);</p>
<pre><code>mqtt_AddConnectionLostHandler(MQTTSession, &amp;OnConnectionLost, NULL);
mqtt_AddMessageArrivedHandler(MQTTSession, &amp;OnMessageArrived, NULL);

sleep (5);
sleep (5);
sleep(5);

/*res = mqtt_Connect(MQTTSession);
if (res == LE_OK)
{
    LE_ERROR("Connection failed! error %d", res);
}
else
{
    LE_INFO("Connected to server '%s'", mqttBrokerURI);
}
//finisce il mio codice
</code></pre>
<p>*/</p>
<p>LE_FATAL_IF(mqtt_Connect(MQTTSession) != LE_OK, ‚ÄúConnection failed‚Äù);</p>
<pre><code>le_timer_Ref_t timer = le_timer_Create("MQTT Publish");
LE_ASSERT_OK(le_timer_SetHandler(timer, &amp;publishTimerHandler));
LE_ASSERT_OK(le_timer_SetMsInterval(timer, 5000));
LE_ASSERT_OK(le_timer_SetRepeat(timer, 0));
LE_ASSERT_OK(le_timer_Start(timer));
LE_INFO("Publish timer started");
le_msg_AddServiceCloseHandler(mqtt_GetServiceRef(), DestroyAllOwnedSessions, NULL);

MQTTClient_init_options initOptions = MQTTClient_init_options_initializer;
initOptions.do_openssl_init = 1;
MQTTClient_global_init(&amp;initOptions);
</code></pre>
<p>}</p>
<p>I used a timer in order to recall the function until there isn‚Äôt a connection to the server.<br>
I configured the broker in this way:<br>
<div class="lightbox-wrapper"><a class="lightbox" href="https://global.discourse-cdn.com/business6/uploads/mangoh/original/2X/f/f846a6d46d7aebf865969c108c87cfc6d22304cc.png" data-download-href="/uploads/short-url/zqlMyBmtDVHOhXaOi2lcq1js0JS.png?dl=1" title="image" rel="noopener nofollow ugc"><img src="https://global.discourse-cdn.com/business6/uploads/mangoh/optimized/2X/f/f846a6d46d7aebf865969c108c87cfc6d22304cc_2_690x419.png" alt="image" data-base62-sha1="zqlMyBmtDVHOhXaOi2lcq1js0JS" width="690" height="419" srcset="https://global.discourse-cdn.com/business6/uploads/mangoh/optimized/2X/f/f846a6d46d7aebf865969c108c87cfc6d22304cc_2_690x419.png, https://global.discourse-cdn.com/business6/uploads/mangoh/original/2X/f/f846a6d46d7aebf865969c108c87cfc6d22304cc.png 1.5x, https://global.discourse-cdn.com/business6/uploads/mangoh/original/2X/f/f846a6d46d7aebf865969c108c87cfc6d22304cc.png 2x" data-small-upload="https://global.discourse-cdn.com/business6/uploads/mangoh/optimized/2X/f/f846a6d46d7aebf865969c108c87cfc6d22304cc_2_10x10.png"><div class="meta">
<svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use xlink:href="#far-image"></use></svg><span class="filename">image</span><span class="informations">764√ó465 36.3 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use xlink:href="#discourse-expand"></use></svg>
</div></a></div></p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="1" />
              </div>

          </div>
          <div id='post_76' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://forum.mangoh.io/u/gavinoimparato1'><span itemprop='name'>gavinoimparato1</span></a>
                
              </span>

              <link itemprop="mainEntityOfPage" href="https://forum.mangoh.io/t/mqttclient-service-connect-error/9093">


              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2021-05-04T11:10:42Z' class='post-time'>
                    May 4, 2021, 11:10am
                  </time>
                  <meta itemprop='dateModified' content='2021-05-04T11:10:42Z'>
              <span itemprop='position'>76</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>As you can see, i‚Äôm trying also with AirVantage adress, but the error is the same</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="1" />
              </div>

          </div>
          <div id='post_77' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://forum.mangoh.io/u/jyijyi'><span itemprop='name'>jyijyi</span></a>
                
              </span>

              <link itemprop="mainEntityOfPage" href="https://forum.mangoh.io/t/mqttclient-service-connect-error/9093">


              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2021-05-04T11:27:45Z' class='post-time'>
                    May 4, 2021, 11:27am
                  </time>
                  <meta itemprop='dateModified' content='2021-05-04T11:27:45Z'>
              <span itemprop='position'>77</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>You can try other mqtt application if yours does not work</p>
<aside class="quote" data-post="24" data-topic="897">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="20" height="20" src="https://sea2.discourse-cdn.com/business6/user_avatar/forum.mangoh.io/mrtranwin731/40/565_2.png" class="avatar">
    <a href="https://forum.mangoh.io/t/mangoh-to-gcloud/897/24">Mangoh-to-gcloud</a> <a class="badge-wrapper  bullet" href="/c/mangoh-red/12"><span class="badge-category-bg" style="background-color: #DF1E2E;"></span><span style="" data-drop-close="true" class="badge-category clear-badge" title="https://mangoh.io/mangoh-red">mangOH Red</span></a>
  </div>
  <blockquote>
    Hey friend, 
These projects are not Legato Application. 
Can you give me more detail? 
Thanks
  </blockquote>
</aside>

            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="1" />
              </div>

          </div>
          <div id='post_78' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://forum.mangoh.io/u/gavinoimparato1'><span itemprop='name'>gavinoimparato1</span></a>
                
              </span>

              <link itemprop="mainEntityOfPage" href="https://forum.mangoh.io/t/mqttclient-service-connect-error/9093">


              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2021-05-04T11:32:11Z' class='post-time'>
                    May 4, 2021, 11:32am
                  </time>
                  <meta itemprop='dateModified' content='2021-05-04T11:32:11Z'>
              <span itemprop='position'>78</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>okay thank you. But is GCould free? In my company they don‚Äôt want to use it. Can I use it for free with a personal account?</p>
<p>[image]</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="1" />
              </div>

          </div>
          <div id='post_79' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://forum.mangoh.io/u/jyijyi'><span itemprop='name'>jyijyi</span></a>
                
              </span>

              <link itemprop="mainEntityOfPage" href="https://forum.mangoh.io/t/mqttclient-service-connect-error/9093">


              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2021-05-04T11:49:39Z' class='post-time'>
                    May 4, 2021, 11:49am
                  </time>
                  <meta itemprop='dateModified' content='2021-05-04T11:49:39Z'>
              <span itemprop='position'>79</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>No idea,  you need to ask google</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="1" />
              </div>

          </div>
          <div id='post_80' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://forum.mangoh.io/u/gavinoimparato1'><span itemprop='name'>gavinoimparato1</span></a>
                
              </span>

              <link itemprop="mainEntityOfPage" href="https://forum.mangoh.io/t/mqttclient-service-connect-error/9093">


              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2021-05-04T12:36:10Z' class='post-time'>
                    May 4, 2021, 12:36pm
                  </time>
                  <meta itemprop='dateModified' content='2021-05-04T12:36:10Z'>
              <span itemprop='position'>80</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>I can‚Äôt use it, I should pay. I can only use mosquitto <img src="https://emoji.discourse-cdn.com/twitter/disappointed_relieved.png?v=9" title=":disappointed_relieved:" class="emoji" alt=":disappointed_relieved:"></p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="0" />
              </div>

          </div>
          <div id='post_81' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://forum.mangoh.io/u/jameswollaeger'><span itemprop='name'>jameswollaeger</span></a>
                
              </span>

              <link itemprop="mainEntityOfPage" href="https://forum.mangoh.io/t/mqttclient-service-connect-error/9093">


              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2021-05-04T21:04:22Z' class='post-time'>
                    May 4, 2021,  9:04pm
                  </time>
                  <meta itemprop='dateModified' content='2021-05-04T21:04:22Z'>
              <span itemprop='position'>81</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>I would advise not trying to use mosquitto on the VM. We have this same setup functional on a desktop running linux(ubuntu 18.04) natively. There is some routing issue where traffic won‚Äôt traverse to a VM. Its too complicated to troubleshoot. You can also run mosquitto server on a cheap raspberry pi.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="1" />
              <span class='post-likes'>1 Like</span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="1" />
              </div>

          </div>
          <div id='post_82' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://forum.mangoh.io/u/gavinoimparato1'><span itemprop='name'>gavinoimparato1</span></a>
                
              </span>

              <link itemprop="mainEntityOfPage" href="https://forum.mangoh.io/t/mqttclient-service-connect-error/9093">

                <link itemprop="image" href="https://global.discourse-cdn.com/business6/uploads/mangoh/original/2X/d/dcf1cf1f1f27a78f32f5935587efe9cd3fee2e86.png">

              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2021-05-05T10:39:39Z' class='post-time'>
                    May 5, 2021, 10:39am
                  </time>
                  <meta itemprop='dateModified' content='2021-05-05T10:39:39Z'>
              <span itemprop='position'>82</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>I think that another parameter that comes me to have error is the url tcp or ssl.<br>
If I put tcp://eu.airvantage.net:1883 or tcp://mqtt.eclipse.org:1883 I obtain<br>
<div class="lightbox-wrapper"><a class="lightbox" href="https://global.discourse-cdn.com/business6/uploads/mangoh/original/2X/d/dcf1cf1f1f27a78f32f5935587efe9cd3fee2e86.png" data-download-href="/uploads/short-url/vwz7fTFB8MV4KMCqERj0jAhUc7k.png?dl=1" title="image" rel="noopener nofollow ugc"><img src="https://global.discourse-cdn.com/business6/uploads/mangoh/optimized/2X/d/dcf1cf1f1f27a78f32f5935587efe9cd3fee2e86_2_690x157.png" alt="image" data-base62-sha1="vwz7fTFB8MV4KMCqERj0jAhUc7k" width="690" height="157" srcset="https://global.discourse-cdn.com/business6/uploads/mangoh/optimized/2X/d/dcf1cf1f1f27a78f32f5935587efe9cd3fee2e86_2_690x157.png, https://global.discourse-cdn.com/business6/uploads/mangoh/optimized/2X/d/dcf1cf1f1f27a78f32f5935587efe9cd3fee2e86_2_1035x235.png 1.5x, https://global.discourse-cdn.com/business6/uploads/mangoh/optimized/2X/d/dcf1cf1f1f27a78f32f5935587efe9cd3fee2e86_2_1380x314.png 2x" data-small-upload="https://global.discourse-cdn.com/business6/uploads/mangoh/optimized/2X/d/dcf1cf1f1f27a78f32f5935587efe9cd3fee2e86_2_10x10.png"><div class="meta">
<svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use xlink:href="#far-image"></use></svg><span class="filename">image</span><span class="informations">1853√ó424 168 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use xlink:href="#discourse-expand"></use></svg>
</div></a></div></p>
<p>If I put local adress such as 0.0.0.0:1883 I obtain only socket error.<br>
Can someone explain to me how to connect to a broker URL (I will be happy also with a local URL)</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="2" />
              </div>

          </div>
          <div id='post_83' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://forum.mangoh.io/u/jyijyi'><span itemprop='name'>jyijyi</span></a>
                
              </span>

              <link itemprop="mainEntityOfPage" href="https://forum.mangoh.io/t/mqttclient-service-connect-error/9093">


              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2021-05-05T10:54:06Z' class='post-time'>
                    May 5, 2021, 10:54am
                  </time>
                  <meta itemprop='dateModified' content='2021-05-05T10:54:06Z'>
              <span itemprop='position'>83</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>That is another issue that the program cannot resolver the ip by dns server</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="1" />
              </div>

          </div>
          <div id='post_84' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://forum.mangoh.io/u/gavinoimparato1'><span itemprop='name'>gavinoimparato1</span></a>
                
              </span>

              <link itemprop="mainEntityOfPage" href="https://forum.mangoh.io/t/mqttclient-service-connect-error/9093">


              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2021-05-05T10:55:55Z' class='post-time'>
                    May 5, 2021, 10:55am
                  </time>
                  <meta itemprop='dateModified' content='2021-05-05T10:55:55Z'>
              <span itemprop='position'>84</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>The root of my problems could be the fact that I‚Äôm using Ubuntu VM on virtual box and so a local adress is not simple to give?</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="1" />
              </div>

          </div>
          <div id='post_85' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://forum.mangoh.io/u/jyijyi'><span itemprop='name'>jyijyi</span></a>
                
              </span>

              <link itemprop="mainEntityOfPage" href="https://forum.mangoh.io/t/mqttclient-service-connect-error/9093">


              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2021-05-05T10:59:21Z' class='post-time'>
                    May 5, 2021, 10:59am
                  </time>
                  <meta itemprop='dateModified' content='2021-05-05T10:59:21Z'>
              <span itemprop='position'>85</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>You might try with rea pc then</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="0" />
              </div>

          </div>
          <div id='post_86' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://forum.mangoh.io/u/jameswollaeger'><span itemprop='name'>jameswollaeger</span></a>
                
              </span>

              <link itemprop="mainEntityOfPage" href="https://forum.mangoh.io/t/mqttclient-service-connect-error/9093">


              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2021-05-05T15:25:59Z' class='post-time'>
                    May 5, 2021,  3:25pm
                  </time>
                  <meta itemprop='dateModified' content='2021-05-05T15:25:59Z'>
              <span itemprop='position'>86</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>In our case, we got an error when trying to connect to mqtt server URL when it was set to non-secured (TCP). When connecting to server over SSL (over port 8883), the issue resolved itself. For some reason, DNS resolution doesn‚Äôt work and we are forced to use the ip address of the server when SSL isn‚Äôt enabled.</p>
<p>Following this page(and all the associated linked pages) on the internet was enough to get us functional setup: <a href="http://www.steves-internet-guide.com/mosquitto_pub-sub-clients/" class="inline-onebox" rel="noopener nofollow ugc">Using The Mosquitto_pub and Mosquitto_sub MQTT Client Tools- Examples</a></p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="1" />
              </div>

                <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="https://forum.mangoh.io/t/mqtt-on-mangoh-yellow/9258/6">MQTT on MangOH Yellow</a>
                        <meta itemprop='position' content='2'>
                      </div>
                </div>
          </div>
          <div id='post_87' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://forum.mangoh.io/u/gavinoimparato1'><span itemprop='name'>gavinoimparato1</span></a>
                
              </span>

              <link itemprop="mainEntityOfPage" href="https://forum.mangoh.io/t/mqttclient-service-connect-error/9093">

                <link itemprop="image" href="https://global.discourse-cdn.com/business6/uploads/mangoh/original/2X/1/1ba87fe317b49e252b200abd68936da012a0a041.png">

              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2021-05-06T08:21:27Z' class='post-time'>
                    May 6, 2021,  8:21am
                  </time>
                  <meta itemprop='dateModified' content='2021-05-06T08:58:02Z'>
              <span itemprop='position'>87</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>I tried, but unfortunately this is not the solution either. However, I noticed another thing. I have Mosquitto server installed on windows of another PC and from my Ubuntu I can ping (seeing the connection attempt on the other side):<br>
<img src="https://global.discourse-cdn.com/business6/uploads/mangoh/original/2X/1/1ba87fe317b49e252b200abd68936da012a0a041.png" alt="image" data-base62-sha1="3WFTOUJQfbeb5tgzLlC41uFHRvP" width="520" height="46"></p>
<p>But if I repeat the same operation from my mangOH nothing happens:<br>
<img src="https://global.discourse-cdn.com/business6/uploads/mangoh/original/2X/f/f7e51a8f193490cbf87550b498cb9c290eae426a.png" alt="image" data-base62-sha1="zmYMPY3gFyZNmqGHvLMgATPczF0" width="432" height="49"></p>
<p><img src="https://global.discourse-cdn.com/business6/uploads/mangoh/original/2X/6/641865634627300c6c97a9ed14b085694dd04987.png" alt="image" data-base62-sha1="ehu0WWalElUFq5t8DdthYXRJ35Z" width="681" height="110"></p>
<p>It‚Äôs a normal thing? Should my mangOH be configured on a door? Because at this point it‚Äôs really not clear to me what I‚Äôm wrong<br>
I want to clarify that my mangOH is on Internet (also with WiFi and Data) so that I can ping google 8.8.8.8.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="1" />
              </div>

          </div>
    </div>

    <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
        <span itemprop='name'><a rel="prev" itemprop="url" href="/t/mqttclient-service-connect-error/9093?page=3">‚Üê previous page</a></span>
        <span itemprop='name'><b><a rel="next" itemprop="url" href="/t/mqttclient-service-connect-error/9093?page=5">next page ‚Üí</a></b></span>
    </div>





    </div>
    <footer class="container wrap">
  <nav class='crawler-nav'>
    <ul>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='/' itemprop="url">Home </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='/categories' itemprop="url">Categories </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='/guidelines' itemprop="url">FAQ/Guidelines </a>
        </span>
      </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
    </ul>
  </nav>
  <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>

    
    
  </body>
  
</html>
