<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>USB disconnection sleep mode</title>
    <link>https://forum.mangoh.io/t/usb-disconnection-sleep-mode/9902</link>
    <description>Hi All,

We have a custom WP7702 board that we are currently building test firmware for. The radio is not yet used, but we have several IO peripherals connected. All is working fine when the USB is connected (logging via ssh connection confirms this). We also have two SPI displays connected which show some information and a few buttons for a GUI.

However, when the USB cable is disconnected, the module seems to go to some sleep state or low power state. The device still works, but key handling and peripheral communication seems slow and irregular. As if the module is going in and out of sleep modes. 

Is there a simple way to disable sleep mode of the WP7702 to check if this is the problem?

Best regards,
Frans.</description>
    
    <lastBuildDate>Thu, 07 Apr 2022 08:51:13 +0000</lastBuildDate>
    <category>Build your own</category>
    <atom:link href="https://forum.mangoh.io/t/usb-disconnection-sleep-mode/9902.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>USB disconnection sleep mode</title>
        <dc:creator><![CDATA[sophiaabigail]]></dc:creator>
        <description><![CDATA[
            <p>Click the Power Management tab. If you want USB ports to keep supplying power in sleep mode, just  uncheck “Allow the computer to turn off this device to save power“. Or check it to let  <a href="https://192168l254.com.mx/es/192.168.8.1" rel="noopener nofollow ugc">192.168 l 8.1</a>   Windows turn off USB ports to save powe<br>
This problem  may occur if you are using the wrong or outdated USB drivers** . So you should update your USB driver to see if it fixes your problem. If you don’t have the time, patience or skills to update the driver manually, you can do it automatically with Driver Easy.</p>
          <p><a href="https://forum.mangoh.io/t/usb-disconnection-sleep-mode/9902/8">Read full topic</a></p>
        ]]></description>
        <link>https://forum.mangoh.io/t/usb-disconnection-sleep-mode/9902/8</link>
        <pubDate>Thu, 07 Apr 2022 08:51:13 +0000</pubDate>
        <guid isPermaLink="false">forum.mangoh.io-post-9902-8</guid>
        <source url="https://forum.mangoh.io/t/usb-disconnection-sleep-mode/9902.rss">USB disconnection sleep mode</source>
      </item>
      <item>
        <title>USB disconnection sleep mode</title>
        <dc:creator><![CDATA[FransKanters]]></dc:creator>
        <description><![CDATA[
            <p>Hi,</p>
<p>Thanks for the suggestion, this solves the problem for me!</p>
<p>Best regards,<br>
Frans.</p>
          <p><a href="https://forum.mangoh.io/t/usb-disconnection-sleep-mode/9902/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.mangoh.io/t/usb-disconnection-sleep-mode/9902/7</link>
        <pubDate>Mon, 04 Apr 2022 09:18:53 +0000</pubDate>
        <guid isPermaLink="false">forum.mangoh.io-post-9902-7</guid>
        <source url="https://forum.mangoh.io/t/usb-disconnection-sleep-mode/9902.rss">USB disconnection sleep mode</source>
      </item>
      <item>
        <title>USB disconnection sleep mode</title>
        <dc:creator><![CDATA[jyijyi]]></dc:creator>
        <description><![CDATA[
            <p>Or you can run this legato app to make the module wake up</p>
<aside class="quote" data-post="2" data-topic="3891">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="20" height="20" src="https://sea2.discourse-cdn.com/business6/user_avatar/forum.mangoh.io/jyijyi/40/997_2.png" class="avatar">
    <a href="https://forum.mangoh.io/t/unable-to-ssh-on-eth0-rj45/3891/2">Unable to ssh on eth0 (RJ45)</a> <a class="badge-wrapper  bullet" href="https://forum.mangoh.io/c/mangoh-green/6"><span class="badge-category-bg" style="background-color: #9EB83B;"></span><span style="" data-drop-close="true" class="badge-category clear-badge" title="https://mangoh.io/mangoh-green">mangOH Green</span></a>
  </div>
  <blockquote>
    I guess the module has gone to sleep mode after you unplugged the USB cable. 
Please run the app to make the module still awake after USB disconnect. 
<a class="attachment" href="https://forum.mangoh.io/uploads/short-url/4uATXQ5rKtkvAGGXwwRNVeDQlYN.rar">wakeup_app.rar</a> (199.2 KB)
  </blockquote>
</aside>

          <p><a href="https://forum.mangoh.io/t/usb-disconnection-sleep-mode/9902/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.mangoh.io/t/usb-disconnection-sleep-mode/9902/6</link>
        <pubDate>Sat, 02 Apr 2022 15:26:03 +0000</pubDate>
        <guid isPermaLink="false">forum.mangoh.io-post-9902-6</guid>
        <source url="https://forum.mangoh.io/t/usb-disconnection-sleep-mode/9902.rss">USB disconnection sleep mode</source>
      </item>
      <item>
        <title>USB disconnection sleep mode</title>
        <dc:creator><![CDATA[jyijyi]]></dc:creator>
        <description><![CDATA[
            <p>yes, you can use an unsandboxed application to issue out this command by system() API.</p>
          <p><a href="https://forum.mangoh.io/t/usb-disconnection-sleep-mode/9902/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.mangoh.io/t/usb-disconnection-sleep-mode/9902/5</link>
        <pubDate>Fri, 01 Apr 2022 07:36:37 +0000</pubDate>
        <guid isPermaLink="false">forum.mangoh.io-post-9902-5</guid>
        <source url="https://forum.mangoh.io/t/usb-disconnection-sleep-mode/9902.rss">USB disconnection sleep mode</source>
      </item>
      <item>
        <title>USB disconnection sleep mode</title>
        <dc:creator><![CDATA[FransKanters]]></dc:creator>
        <description><![CDATA[
            <p>Hi,</p>
<p>Thank you, this indeed does the trick! However, it does not stick after a reboot of the module. Is there an AT command with the same function that is persistent over reboots? Or should I write this value in the system from my user application?</p>
<p>Best regards,<br>
Frans.</p>
          <p><a href="https://forum.mangoh.io/t/usb-disconnection-sleep-mode/9902/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.mangoh.io/t/usb-disconnection-sleep-mode/9902/4</link>
        <pubDate>Fri, 01 Apr 2022 07:17:09 +0000</pubDate>
        <guid isPermaLink="false">forum.mangoh.io-post-9902-4</guid>
        <source url="https://forum.mangoh.io/t/usb-disconnection-sleep-mode/9902.rss">USB disconnection sleep mode</source>
      </item>
      <item>
        <title>USB disconnection sleep mode</title>
        <dc:creator><![CDATA[jyijyi]]></dc:creator>
        <description><![CDATA[
            <p>you can try this before removing the USB cable:</p>
<p>echo NO_SLEEP &gt; /sys/power/wake_lock</p>
          <p><a href="https://forum.mangoh.io/t/usb-disconnection-sleep-mode/9902/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.mangoh.io/t/usb-disconnection-sleep-mode/9902/3</link>
        <pubDate>Thu, 31 Mar 2022 23:28:21 +0000</pubDate>
        <guid isPermaLink="false">forum.mangoh.io-post-9902-3</guid>
        <source url="https://forum.mangoh.io/t/usb-disconnection-sleep-mode/9902.rss">USB disconnection sleep mode</source>
      </item>
      <item>
        <title>USB disconnection sleep mode</title>
        <dc:creator><![CDATA[FransKanters]]></dc:creator>
        <description><![CDATA[
            <p>This is a part from the log. This only occurs when USB is disconnected and the module tries to sleep several times per second…</p>
<p>8 05:00:01 swi-mdm9x28-wp user.info kernel: [189784.501309] PM: Syncing filesystems … done.<br>
Jan  8 05:00:01 swi-mdm9x28-wp user.debug kernel: [189784.536736] PM: Preparing system for mem sleep<br>
Jan  8 05:00:01 swi-mdm9x28-wp user.info Legato:  INFO | ngtpagerservice[841]/NGTPagerServiceComponent T=main | DP6000Codec.c ExtractDP6000Packet() 508 | NGT: ###### receivedHandshakeID: 0<br>
Jan  8 05:00:01 swi-mdm9x28-wp user.info Legato:  INFO | ngtpagerservice[841]/NGTPagerServiceComponent T=main | DP6000Codec.c ExtractDP6000Packet() 509 | NGT: ###### receivedApplicationID: 0<br>
Jan  8 05:00:01 swi-mdm9x28-wp user.info Legato:  INFO | ngtpagerservice[841]/NGTPagerServiceComponent T=main | DP6000Codec.c ExtractDP6000Packet() 510 | NGT: ###### receivedNumberOfAlphaBlocks: 0<br>
Jan  8 05:00:01 swi-mdm9x28-wp user.warn kernel: [189784.565271] Freezing user space processes …<br>
Jan  8 05:00:01 swi-mdm9x28-wp user.info kernel: [189784.571701] PM: Wakeup pending, aborting suspend<br>
Jan  8 05:00:01 swi-mdm9x28-wp user.info kernel: [189784.572320] last active wakeup source: eventpoll<br>
Jan  8 05:00:01 swi-mdm9x28-wp user.warn kernel: [189784.572678]<br>
Jan  8 05:00:01 swi-mdm9x28-wp user.err kernel: [189784.572706] Freezing of tasks aborted after 0.007 seconds<br>
Jan  8 05:00:01 swi-mdm9x28-wp user.warn kernel: [189784.577463] Restarting tasks … done.<br>
Jan  8 05:00:01 swi-mdm9x28-wp user.info kernel: [189784.586471] sierra_pm_resume<br>
Jan  8 05:00:01 swi-mdm9x28-wp user.info kernel: [189784.586862] Abort: Last active Wakeup Source: eventpoll<br>
Jan  8 05:00:01 swi-mdm9x28-wp user.info kernel: [189784.587347] PM: suspend exit 1980-01-08 05:00:01.090657278 UTC<br>
Jan  8 05:00:01 swi-mdm9x28-wp user.info kernel: [189784.588086] PM: suspend entry 1980-01-08 05:00:01.091404883 UTC<br>
Jan  8 05:00:01 swi-mdm9x28-wp user.info kernel: [189784.588115] PM: Syncing filesystems … done.<br>
Jan  8 05:00:01 swi-mdm9x28-wp user.debug kernel: [189784.618966] PM: Preparing system for mem sleep<br>
Jan  8 05:00:01 swi-mdm9x28-wp user.warn kernel: [189784.652882] Freezing user space processes … (elapsed 0.008 seconds) done.<br>
Jan  8 05:00:01 swi-mdm9x28-wp user.warn kernel: [189784.661194] Freezing remaining freezable tasks …<br>
Jan  8 05:00:01 swi-mdm9x28-wp user.info kernel: [189784.809012] PM: Wakeup pending, aborting suspend<br>
Jan  8 05:00:01 swi-mdm9x28-wp user.info kernel: [189784.809153] active wakeup source: [timerfd]<br>
Jan  8 05:00:01 swi-mdm9x28-wp user.info kernel: [189784.809367] active wakeup source: [timerfd]<br>
Jan  8 05:00:01 swi-mdm9x28-wp user.warn kernel: [189784.809746]<br>
Jan  8 05:00:01 swi-mdm9x28-wp user.err kernel: [189784.809770] Freezing of tasks aborted after 0.148 seconds<br>
Jan  8 05:00:01 swi-mdm9x28-wp user.warn kernel: [189784.814229] Restarting kernel threads … done.<br>
Jan  8 05:00:01 swi-mdm9x28-wp user.debug Legato:  DBUG | ngtpagerservice[841]/framework T=main | timer.c ProcessExpiredTimer() 392 | Timer ‘Button timer’ expired<br>
Jan  8 05:00:01 swi-mdm9x28-wp user.debug Legato:  DBUG | ngtpagerservice[841]/framework T=main | timer.c ProcessExpiredTimer() 392 | Timer ‘new timer Process LTE Queue’ expired<br>
Jan  8 05:00:01 swi-mdm9x28-wp user.info Legato:  INFO | ngtpagerservice[841]/NGTPagerServiceComponent T=main | message_queue.c TimerProcessQueueExpiryHandler() 242 | NGT: Handling Message Queue…<br>
Jan  8 05:00:01 swi-mdm9x28-wp user.debug Legato:  DBUG | ngtpagerservice[841]/framework T=main | timer.c ProcessExpiredTimer() 392 | Timer ‘Button timer’ expired<br>
Jan  8 05:00:01 swi-mdm9x28-wp user.debug Legato:  DBUG | ngtpagerservice[841]/framework T=main | timer.c ProcessExpiredTimer() 392 | Timer ‘io timer’ expired<br>
Jan  8 05:00:01 swi-mdm9x28-wp user.debug Legato:  DBUG | ngtpagerservice[841]/framework T=main | timer.c ProcessExpiredTimer() 392 | Timer ‘CC1125RX timer’ expired<br>
Jan  8 05:00:01 swi-mdm9x28-wp user.warn kernel: [189784.815640] Restarting tasks … done.<br>
Jan  8 05:00:01 swi-mdm9x28-wp user.info kernel: [189784.826305] sierra_pm_resume<br>
Jan  8 05:00:01 swi-mdm9x28-wp user.info kernel: [189784.830483] Abort: Pending Wakeup Sources: [timerfd] [timerfd]<br>
Jan  8 05:00:01 swi-mdm9x28-wp user.info kernel: [189784.834339] PM: suspend exit 1980-01-08 05:00:01.337638945 UTC<br>
Jan  8 05:00:01 swi-mdm9x28-wp user.info kernel: [189784.834463] PM: suspend entry 1980-01-08 05:00:01.337782747 UTC</p>
          <p><a href="https://forum.mangoh.io/t/usb-disconnection-sleep-mode/9902/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.mangoh.io/t/usb-disconnection-sleep-mode/9902/2</link>
        <pubDate>Thu, 31 Mar 2022 14:24:48 +0000</pubDate>
        <guid isPermaLink="false">forum.mangoh.io-post-9902-2</guid>
        <source url="https://forum.mangoh.io/t/usb-disconnection-sleep-mode/9902.rss">USB disconnection sleep mode</source>
      </item>
      <item>
        <title>USB disconnection sleep mode</title>
        <dc:creator><![CDATA[FransKanters]]></dc:creator>
        <description><![CDATA[
            <p>Hi All,</p>
<p>We have a custom WP7702 board that we are currently building test firmware for. The radio is not yet used, but we have several IO peripherals connected. All is working fine when the USB is connected (logging via ssh connection confirms this). We also have two SPI displays connected which show some information and a few buttons for a GUI.</p>
<p>However, when the USB cable is disconnected, the module seems to go to some sleep state or low power state. The device still works, but key handling and peripheral communication seems slow and irregular. As if the module is going in and out of sleep modes.</p>
<p>Is there a simple way to disable sleep mode of the WP7702 to check if this is the problem?</p>
<p>Best regards,<br>
Frans.</p>
          <p><a href="https://forum.mangoh.io/t/usb-disconnection-sleep-mode/9902/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.mangoh.io/t/usb-disconnection-sleep-mode/9902/1</link>
        <pubDate>Thu, 31 Mar 2022 14:06:27 +0000</pubDate>
        <guid isPermaLink="false">forum.mangoh.io-post-9902-1</guid>
        <source url="https://forum.mangoh.io/t/usb-disconnection-sleep-mode/9902.rss">USB disconnection sleep mode</source>
      </item>
  </channel>
</rss>
