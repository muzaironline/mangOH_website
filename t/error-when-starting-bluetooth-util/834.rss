<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Error when starting Bluetooth Util</title>
    <link>https://forum.mangoh.io/t/error-when-starting-bluetooth-util/834</link>
    <description>Hi,
I am currently trying to run the bluetoothUtil demo on my mangoH Green.

But I get the following errors when starting the app: 
`Jan  6 00:16:21 | =ERR= | bt-init.sh[2995] | /legato/systems/current/apps/bluetoothUtil/read-only/bin/bt-init.sh: `
`Jan  6 00:16:21 | =ERR= | bt-init.sh[2995] | line 27: `
`Jan  6 00:16:21 | =ERR= | bt-init.sh[2995] | mux: not found`
`Jan  6 00:16:21 | =ERR= | bt-init.sh[2995] | `
`Jan  6 00:16:21 | =ERR= | bt-init.sh[2995] | /legato/systems/current/apps/bluetoothUtil/read-only/bin/bt-init.sh: `
`Jan  6 00:16:21 | =ERR= | bt-init.sh[2995] | line 28: `
`Jan  6 00:16:21 | =ERR= | bt-init.sh[2995] | mux: not found`
`Jan  6 00:16:21 | =ERR= | bt-init.sh[2995] | `

I installed the muxControl from the github https://github.com/mangOH/MuxControl and they are running:
`root@swi-mdm9x15:~# app status`
`[running] atClient`
`[running] atServer`
`[running] audioService`
`[running] avcService`
`[running] cellNetService`
`[running] dataConnectionService`
`[running] fwupdateService`
`[running] gpioService`
`[running] modemService`
`[running] positioningService`
`[running] powerMgr`
`[running] secStore`
`[stopped] smsInboxService`
`[stopped] spiService`
`[stopped] tools`
`[stopped] voiceCallService`
`[stopped] wifi`
`[stopped] wifiApTest`
`[stopped] wifiClientTest`
`[running] wifiService`
`[stopped] wifiWebAp`
`[running] bluetoothUtil`
`[running] muxCtrlService`
`[running] muxCtrlTools`

Has anyone having the same issue?

Thank you :slight_smile:</description>
    
    <lastBuildDate>Thu, 01 Mar 2018 11:35:45 +0000</lastBuildDate>
    <category>Tutorials</category>
    <atom:link href="https://forum.mangoh.io/t/error-when-starting-bluetooth-util/834.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Error when starting Bluetooth Util</title>
        <dc:creator><![CDATA[FebinPS]]></dc:creator>
        <description><![CDATA[
            <p>Is there any way we can circumvent the use of mux commands ?</p>
          <p><a href="https://forum.mangoh.io/t/error-when-starting-bluetooth-util/834/10">Read full topic</a></p>
        ]]></description>
        <link>https://forum.mangoh.io/t/error-when-starting-bluetooth-util/834/10</link>
        <pubDate>Thu, 01 Mar 2018 11:35:45 +0000</pubDate>
        <guid isPermaLink="false">forum.mangoh.io-post-834-10</guid>
        <source url="https://forum.mangoh.io/t/error-when-starting-bluetooth-util/834.rss">Error when starting Bluetooth Util</source>
      </item>
      <item>
        <title>Error when starting Bluetooth Util</title>
        <dc:creator><![CDATA[FebinPS]]></dc:creator>
        <description><![CDATA[
            <p>Hi,</p>
<p>I am at a similar fix.</p>
<p>why is that we get <strong>-sh: mux: not found</strong> when using mux commands ?</p>
          <p><a href="https://forum.mangoh.io/t/error-when-starting-bluetooth-util/834/9">Read full topic</a></p>
        ]]></description>
        <link>https://forum.mangoh.io/t/error-when-starting-bluetooth-util/834/9</link>
        <pubDate>Thu, 01 Mar 2018 09:29:33 +0000</pubDate>
        <guid isPermaLink="false">forum.mangoh.io-post-834-9</guid>
        <source url="https://forum.mangoh.io/t/error-when-starting-bluetooth-util/834.rss">Error when starting Bluetooth Util</source>
      </item>
      <item>
        <title>Error when starting Bluetooth Util</title>
        <dc:creator><![CDATA[dfrey]]></dc:creator>
        <description><![CDATA[
            <p><code>mksys -t wp85 path/to/system.sdef</code></p>
<p>The sdef represents an entire legato system.  So it builds all the apps.</p>
          <p><a href="https://forum.mangoh.io/t/error-when-starting-bluetooth-util/834/8">Read full topic</a></p>
        ]]></description>
        <link>https://forum.mangoh.io/t/error-when-starting-bluetooth-util/834/8</link>
        <pubDate>Wed, 25 Oct 2017 16:29:08 +0000</pubDate>
        <guid isPermaLink="false">forum.mangoh.io-post-834-8</guid>
        <source url="https://forum.mangoh.io/t/error-when-starting-bluetooth-util/834.rss">Error when starting Bluetooth Util</source>
      </item>
      <item>
        <title>Error when starting Bluetooth Util</title>
        <dc:creator><![CDATA[GabiSRC]]></dc:creator>
        <description><![CDATA[
            <p>Hi,<br>
Ok, but I do not understand how I am suppose to build the application from a .sdef file. Could you please elaborate?</p>
<p>I thought that to build an app, I had only to go the sample folder and run <code>make</code> or <code>mkapp -t wp85 &lt;.adef file&gt;</code>. When I run the <code>mkapp</code> command on the .sdef file I have: <code>Path 'containerTracking.sdef' does not end in '.adef'.</code><br>
I ran these commands from my ubuntu VM on which the legato tools is installed.</p>
<p>Also, I do not understand how the mux command is provided from this file.</p>
<p>Thank you</p>
          <p><a href="https://forum.mangoh.io/t/error-when-starting-bluetooth-util/834/7">Read full topic</a></p>
        ]]></description>
        <link>https://forum.mangoh.io/t/error-when-starting-bluetooth-util/834/7</link>
        <pubDate>Wed, 25 Oct 2017 07:29:34 +0000</pubDate>
        <guid isPermaLink="false">forum.mangoh.io-post-834-7</guid>
        <source url="https://forum.mangoh.io/t/error-when-starting-bluetooth-util/834.rss">Error when starting Bluetooth Util</source>
      </item>
      <item>
        <title>Error when starting Bluetooth Util</title>
        <dc:creator><![CDATA[dfrey]]></dc:creator>
        <description><![CDATA[
            <p>Sorry, I just realize that I sent you down the wrong path.  For some reason I thought you were using a mangOH Red.  Since you are using a mangOH Green, it should just be a matter of creating an appropriate SDEF and building that.</p>
<p>Take a look at this for example: <a href="https://github.com/mangOH/Demos/blob/master/smartBoat.sdef" rel="nofollow noopener">https://github.com/mangOH/Demos/blob/master/smartBoat.sdef</a></p>
<p>You can take out all of the apps except for <code>bluetoothUtil</code>.  The mangOH_Green.sdef (that is reference by the above example) is what provides the <code>mux</code> command.  Also, please undo the modifications to <a href="http://bt-init.sh" rel="nofollow noopener">bt-init.sh</a> that I suggested previously since those were based on my (incorrect) understanding that you are using mangOH Red.</p>
          <p><a href="https://forum.mangoh.io/t/error-when-starting-bluetooth-util/834/6">Read full topic</a></p>
        ]]></description>
        <link>https://forum.mangoh.io/t/error-when-starting-bluetooth-util/834/6</link>
        <pubDate>Tue, 24 Oct 2017 17:10:20 +0000</pubDate>
        <guid isPermaLink="false">forum.mangoh.io-post-834-6</guid>
        <source url="https://forum.mangoh.io/t/error-when-starting-bluetooth-util/834.rss">Error when starting Bluetooth Util</source>
      </item>
      <item>
        <title>Error when starting Bluetooth Util</title>
        <dc:creator><![CDATA[GabiSRC]]></dc:creator>
        <description><![CDATA[
            <p>Ok, now I do not have the permission issue anymore, thank you <img src="https://emoji.discourse-cdn.com/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p>I still have<br>
<code>sh: write error: Device or resource busy</code><br>
<code>Can't set device: Device or resource busy</code></p>
<p>And I do not see my talon bluetooth IoT card leds ON. I put my IoT card on the slot 0; maybe it should be a different one?</p>
          <p><a href="https://forum.mangoh.io/t/error-when-starting-bluetooth-util/834/5">Read full topic</a></p>
        ]]></description>
        <link>https://forum.mangoh.io/t/error-when-starting-bluetooth-util/834/5</link>
        <pubDate>Tue, 24 Oct 2017 15:39:38 +0000</pubDate>
        <guid isPermaLink="false">forum.mangoh.io-post-834-5</guid>
        <source url="https://forum.mangoh.io/t/error-when-starting-bluetooth-util/834.rss">Error when starting Bluetooth Util</source>
      </item>
      <item>
        <title>Error when starting Bluetooth Util</title>
        <dc:creator><![CDATA[dfrey]]></dc:creator>
        <description><![CDATA[
            <p>oops, It should have been <code>echo out &gt; /sys/class/gpio/gpio2/direction</code> for the second block.</p>
          <p><a href="https://forum.mangoh.io/t/error-when-starting-bluetooth-util/834/4">Read full topic</a></p>
        ]]></description>
        <link>https://forum.mangoh.io/t/error-when-starting-bluetooth-util/834/4</link>
        <pubDate>Tue, 24 Oct 2017 15:22:41 +0000</pubDate>
        <guid isPermaLink="false">forum.mangoh.io-post-834-4</guid>
        <source url="https://forum.mangoh.io/t/error-when-starting-bluetooth-util/834.rss">Error when starting Bluetooth Util</source>
      </item>
      <item>
        <title>Error when starting Bluetooth Util</title>
        <dc:creator><![CDATA[GabiSRC]]></dc:creator>
        <description><![CDATA[
            <aside class="quote" data-post="2" data-topic="834">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="https://sea2.discourse-cdn.com/business6/user_avatar/forum.mangoh.io/dfrey/40/303_1.png" class="avatar"> dfrey:</div>
<blockquote>
<h1>Set IoT card GPIO3 to high</h1>
<p>echo 7 &gt; /sys/class/gpio/export<br>
echo out &gt; /sys/class/gpio/gpio7/direction<br>
echo 1 &gt; /sys/class/gpio/gpio7/value</p>
<h1>Take the IoT card out of reset</h1>
<p>echo 2 &gt; /sys/class/gpio/export<br>
echo out &gt; /sys/class/gpio/direction<br>
echo 1 &gt; /sys/class/gpio/gpio2/value</p>
</blockquote>
</aside>
<p>Thank you for the story, it’s always pleasant to know the story behind <img src="https://emoji.discourse-cdn.com/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p>So, I did what you suggested and I get<br>
<code>root@swi-mdm9x15:/legato/systems/current/appsWriteable/bluetoothUtil/bin# ./bt-init.sh</code><br>
<code>PWD is: /legato/systems/current/appsWriteable/bluetoothUtil/bin</code><br>
<code>./bt-init.sh: line 36: can't create /sys/class/gpio/direction: Permission denied</code><br>
<code>sh: write error: Operation not permitted</code><br>
<code>Can't set device: Device or resource busy</code><br>
<code>Can't initialize device: Device or resource busy</code><br>
<code>hci0: Type: BR/EDR Bus: UART</code><br>
<code>BD Address: 00:00:00:00:00:00 ACL MTU: 0:0 SCO MTU: 0:0</code><br>
<code>DOWN</code><br>
<code>RX bytes:0 acl:0 sco:0 events:0 errors:0</code><br>
<code>TX bytes:24 acl:0 sco:0 commands:6 errors:0</code><br>
<code>Can't init device hci0: Connection timed out (110)</code></p>
<p>I really don’t know how to get rid of this permission error…</p>
          <p><a href="https://forum.mangoh.io/t/error-when-starting-bluetooth-util/834/3">Read full topic</a></p>
        ]]></description>
        <link>https://forum.mangoh.io/t/error-when-starting-bluetooth-util/834/3</link>
        <pubDate>Tue, 24 Oct 2017 06:59:20 +0000</pubDate>
        <guid isPermaLink="false">forum.mangoh.io-post-834-3</guid>
        <source url="https://forum.mangoh.io/t/error-when-starting-bluetooth-util/834.rss">Error when starting Bluetooth Util</source>
      </item>
      <item>
        <title>Error when starting Bluetooth Util</title>
        <dc:creator><![CDATA[dfrey]]></dc:creator>
        <description><![CDATA[
            <p>OK, this is going to be a bit of a long story…</p>
<p>MuxCtrlService and MuxCtrlTools are apps that were written a while back to manage muxing of IO on the mangOH Green from userspace using a Legato app.  Later we came up with the idea of the IoT framework which was a kernel based system for setting up IoT cards including the muxing of IOs.  This code lives in the legato repository under <code>drivers/mangoh</code>.  More recently, we have split out the driver loading from the IoT framework.  The driver loading is now done by <code>linux_kernel_modules/mangoh</code> in the mangOH repository.  This driver is incompatible with the mangoh driver in the legato repository.  For the IoT framework, I have been working on migrating the mangoh driver from legato into a driver that will work for the mangOH Red and Green.  mangOH Red support is 95% complete.  I will update the forum when I post the source for the IoT framework driver that supports mangOH Red.</p>
<p>While you’re waiting, you can remove the <code>mux</code> commands and the echo commands from <a href="http://bt-init.sh" rel="nofollow noopener">bt-init.sh</a> and replace it with this:</p>
<pre><code># Set IoT card GPIO3 to high
echo 7 &gt; /sys/class/gpio/export
echo out &gt; /sys/class/gpio/gpio7/direction
echo 1 &gt; /sys/class/gpio/gpio7/value
# Take the IoT card out of reset
echo 2 &gt; /sys/class/gpio/export
echo out &gt; /sys/class/gpio/direction
echo 1 &gt; /sys/class/gpio/gpio2/value
</code></pre>
<p>Let me know if you’re still stuck after trying that.</p>
          <p><a href="https://forum.mangoh.io/t/error-when-starting-bluetooth-util/834/2">Read full topic</a></p>
        ]]></description>
        <link>https://forum.mangoh.io/t/error-when-starting-bluetooth-util/834/2</link>
        <pubDate>Mon, 23 Oct 2017 15:06:34 +0000</pubDate>
        <guid isPermaLink="false">forum.mangoh.io-post-834-2</guid>
        <source url="https://forum.mangoh.io/t/error-when-starting-bluetooth-util/834.rss">Error when starting Bluetooth Util</source>
      </item>
      <item>
        <title>Error when starting Bluetooth Util</title>
        <dc:creator><![CDATA[GabiSRC]]></dc:creator>
        <description><![CDATA[
            <p>Hi,<br>
I am currently trying to run the bluetoothUtil demo on my mangoH Green.</p>
<p>But I get the following errors when starting the app:<br>
<code>Jan 6 00:16:21 | =ERR= | bt-init.sh[2995] | /legato/systems/current/apps/bluetoothUtil/read-only/bin/bt-init.sh:</code><br>
<code>Jan 6 00:16:21 | =ERR= | bt-init.sh[2995] | line 27:</code><br>
<code>Jan 6 00:16:21 | =ERR= | bt-init.sh[2995] | mux: not found</code><br>
<code>Jan 6 00:16:21 | =ERR= | bt-init.sh[2995] |</code><br>
<code>Jan 6 00:16:21 | =ERR= | bt-init.sh[2995] | /legato/systems/current/apps/bluetoothUtil/read-only/bin/bt-init.sh:</code><br>
<code>Jan 6 00:16:21 | =ERR= | bt-init.sh[2995] | line 28:</code><br>
<code>Jan 6 00:16:21 | =ERR= | bt-init.sh[2995] | mux: not found</code><br>
<code>Jan 6 00:16:21 | =ERR= | bt-init.sh[2995] |</code></p>
<p>I installed the muxControl from the github <a href="https://github.com/mangOH/MuxControl" rel="nofollow noopener">https://github.com/mangOH/MuxControl</a> and they are running:<br>
<code>root@swi-mdm9x15:~# app status</code><br>
<code>[running] atClient</code><br>
<code>[running] atServer</code><br>
<code>[running] audioService</code><br>
<code>[running] avcService</code><br>
<code>[running] cellNetService</code><br>
<code>[running] dataConnectionService</code><br>
<code>[running] fwupdateService</code><br>
<code>[running] gpioService</code><br>
<code>[running] modemService</code><br>
<code>[running] positioningService</code><br>
<code>[running] powerMgr</code><br>
<code>[running] secStore</code><br>
<code>[stopped] smsInboxService</code><br>
<code>[stopped] spiService</code><br>
<code>[stopped] tools</code><br>
<code>[stopped] voiceCallService</code><br>
<code>[stopped] wifi</code><br>
<code>[stopped] wifiApTest</code><br>
<code>[stopped] wifiClientTest</code><br>
<code>[running] wifiService</code><br>
<code>[stopped] wifiWebAp</code><br>
<code>[running] bluetoothUtil</code><br>
<code>[running] muxCtrlService</code><br>
<code>[running] muxCtrlTools</code></p>
<p>Has anyone having the same issue?</p>
<p>Thank you <img src="https://emoji.discourse-cdn.com/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
          <p><a href="https://forum.mangoh.io/t/error-when-starting-bluetooth-util/834/1">Read full topic</a></p>
        ]]></description>
        <link>https://forum.mangoh.io/t/error-when-starting-bluetooth-util/834/1</link>
        <pubDate>Mon, 23 Oct 2017 07:41:33 +0000</pubDate>
        <guid isPermaLink="false">forum.mangoh.io-post-834-1</guid>
        <source url="https://forum.mangoh.io/t/error-when-starting-bluetooth-util/834.rss">Error when starting Bluetooth Util</source>
      </item>
  </channel>
</rss>
